#!/bin/bash

export temporal="/tmp/temporal"
export temporalreg="/tmp/temporalreg"
export REPO="/var/EAC/"
export TERM="xterm" 
#export LANG="es_ES.UTF-8"
export LANG="C"
#setupcon
#export servertime="hora.alumnos.uma.es"

function IPservidor () {
IPservidor=$(cat /proc/cmdline | awk ' BEGIN { FS="nfsroot=" } ; {print $2}' | awk -F: '{print $1}')
export IPservidor
}

function MACADDR () {
MAC=$(/sbin/ifconfig $1 | awk '/HW/ {print $5}')
export MAC
}

function IPADDR () {
IP=$(/sbin/ifconfig $1 | grep .255 | awk '{print $2}' | cut -d':' -f2 | awk -F\  '{print $1}')
IPuno=$(/sbin/ifconfig $1 | grep .255 | awk '{print $2}' | cut -d':' -f2 | cut -d'.' -f1)
IPdos=$(/sbin/ifconfig $1 | grep .255 | awk '{print $2}' | cut -d':' -f2 | cut -d'.' -f2)
IPtres=$(/sbin/ifconfig $1 | grep .255 | awk '{print $2}' | cut -d':' -f2 | cut -d'.' -f3)
IPcuatro=$(/sbin/ifconfig $1 | grep .255 | awk '{print $2}' | cut -d':' -f2 | cut -d'.' -f4)
export IPuno
export IPdos
export IPtres
export IPcuatro
export IP
}

function CloneImage {
CloneImageNTFS=`cat ${REPO}admin/config/EAC.conf | grep CloneImageNTFS | awk -F\" '{print $4}'`
CloneImageEXT23=`cat ${REPO}admin/config/EAC.conf | grep CloneImageEXT23 | awk -F\" '{print $4}'`
export CloneImageNTFS
export CloneImageEXT23
}



IPservidor
MACADDR eth0
IPADDR eth0
CloneImage
#ntpdate $servertime

function clean () {
if [ $# = 0 ]
then
echo clean str_colour 
echo clean red
reset
fi
case $1 in
white)
	tput setb 7;
	tput setf 0;;
blue)
	tput setb 1;
	tput setf 0;;
green)
	tput setb 2;
	tput setf 0;;
softblue)
	tput setb 3;
	tput setf 0;;
red)
	tput setb 4;
	tput setf 0;;
orange)
	tput setb 6;
	tput setf 0;;
*)
	tput setb 0;
	tput setf 7;;
esac
clear
}


function Msg () {
if [ $# = 0 ]
then
echo Msg "mensaje" str_colour str_position
echo Msg "este es mi mensaje" green down-center
fi
case $2 in
black)
	tput setf 0;;
blue|info)
	tput setf 1;;
green|result)
	tput setf 2;;
softblue|info2)
	tput setf 3;;
red|warning)
	tput setf 4;;
orange|example)
	tput setf 6;;
*)
	tput setf 7;;
esac

case $3 in
"up-center")
	tput cup 0 40;;
"up-left")
	tput cup 0 0;;
"up-right")
	tput cup 0 80;;
"middle-left")
	tput cupt 40 0;;
"middle-center")
	tput cup 40 40;;
"middle-right")
	tput cup 40 80;;
"down-left")
	tput cup 80 0;;
"down-center")
	tput cup 80 40;;
"down-right")
	tput cup 80 80;;
*)
;;
esac
#echo -ne "$1" 
echo $1
tput setf 7
}

