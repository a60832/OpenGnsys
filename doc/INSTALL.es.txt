Instalación de OpenGnSys Server v 1.0.5
=======================================

Notas iniciales
---------------

Se presupone que el servidor de OpenGnSys va a ser instalado en una distribución del sistema operativo Ubuntu Server a partir de la versión 12.04 LTS (también ha sido probado en sistemas basados en Fedora 20).

El serividor debe tener acceso a Internet para descargar los paquetes necesarios, el repositorio de código y el cliente preconfigurado.

Requisitos mínimos de almacenamiento:
- 100 MB en el directorio /tmp (solo durante la instalación)
- 450 MB en el directorio /var/lib/tftpboot (o /srv en sistemas Debian)
- 500 MB en el directorio de instalación /opt/opengnsys sin contar el espacio para logs (100 MB si el cliente ogLive está previamente descargado).
- Estimar la capacidad necesaria para el repositorio de imágenes en /opt/opengnsys/images (es recomendable que este directorio se monte sobre un sistema de archivos independiente).


Instalación
-----------

La instalación de OpenGnSys se realiza ejecutando el script de instalación opengnsys_installer.sh, el cual puede obtenerse descomprimiendo el fichero de la versión opengnsys-Version.tar.gz o descargándolo directamente de la dirección: http://www.opengnsys.es/svn/branches/version1.0/installer/opengnsys_installer.sh

Ejemplos de descompresión del programa:

	tar xvzf opengnsys-1.0.5.tar.gz
	cd opengnsys/installer

Ejemplos de descarga con varias herramientas:

    * Descargar con wget.
	wget http://www.opengnsys.es/svn/branches/version1.0/installer/opengnsys_installer.sh -O opengnsys_installer.sh

    * Descargar con curl.
	curl http://www.opengnsys.es/svn/branches/version1.0/installer/opengnsys_installer.sh > opengnsys_installer.sh


El script de instalación debe ser ejecutado como usuario root:
	sudo bash opengnsys_installer.sh


Dicho script solicitará por teclado la siguiente información para configurar el acceso al servicio (si no se indica un parámetro, toma el valor por defecto):
    * Clave del usuario root de MySQL.
    * Usuario de acceso a la consola web y super-administrador de OpenGnSys.
    * Clave del usuario de acceso a la consola web.
    * Clave de acceso del cliente a servicios remotos. 

Se realizan los siguientes procesos:
    * Obtener los parámetros básicos de la red.
    * Comprobar los paquetes instalados.
    * Descargar e instalar las dependencias que faltan.
    * Crear la estructura básica de directorios de OpenGnSys.
    * Descargar el repositorio de código en un directorio temporal (/tmp/opengnsys_installer). Nota: en versiones futuras este proceso no será necesario.
    * Compilar e instalar los servicios de OpenGnSys.
    * Configuración básica de los serviciios de red DHCP, PXE y NFS/Samba a partir de las plantillas de configuración
    * Copiar ficheros complementarios de gestión del servidor.
    * Crear la base de datos y configurar el servidor web de OpenGnSys Web Admin Console.
    * Copiar los ficheros de las páginas de Web Admin Console.
    * Copiar la estructura de directorios de OpenGnSys Client.
    * Descargar la imagen inicial de OpenGnSys Client.
    * Configuración básica de los serviciios de OpenGnSys a partir de los parámetros de red.

Una vez finalizada la ejecución del instalador, puede empezarse a trabajar con el sistema:
    * Configurar DHCP.
    * Añadir datos en la consola de administración.
    * Personalizar scripts de administración.
    * Definir menús de inicio para los clientes.



Actualización
-------------

Se dispone de un script de auto-actualización del sistema, con las siguientes características:
    * Es necesario conexión a Internet para obtener las últimas actualizaciones.
    * Si el script se actualiza a sí mismo, debe ser ejecutado de nuevo.
    * No se actualizan los servicios asociados al sistema operativo.
    * No se modifican los ficheros de configuración.


El script debe ser ejecutado como usuario root:
	sudo /opt/opengnsys/lib/opengnsys_update.sh
 


Desinstalación
--------------

También existe un script de desinstalación de los componentes de OpenGnSys, con las siguientes características:
    * Se eliminan los ficheros de OpenGnSys y su base de datos.
    * No se eliminan ni paquetes del sistema operativo ni sus ficheros de configuración.
    * No se elimina el directorio de las imágenes ni su contenido.


El script debe ser ejecutado como usuario root:
	sudo /opt/opengnsys/lib/opengnsys_uninstall.sh
 

