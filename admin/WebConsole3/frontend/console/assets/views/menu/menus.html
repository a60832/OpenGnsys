<ui-view>
 <section class="content-header">
    <h1 translate="menus">
    </h1>
    <ol class="breadcrumb">
      <li><a ui-sref="app.dashboard"><i class="fa fa-dashboard"></i> {{'dashboard'|translate}}</a></li>
      <li class="active" translate="menus"></li>
    </ol>
  </section>
   <section fixed-toolboxbar class="toolboxbar">
    <div >
      <div class="col-md-12">
        <div class="input-group">
            <input type="text" name="q" class="form-control" placeholder="{{'search'|translate}}..." ng-model="vm.ngTableSearch.text">
                <span class="input-group-btn">
                  <button type="button" name="search" id="search-btn" class="btn btn-flat"><i class="fa fa-search"></i>
                  </button>
                </span>
          </div>
      </div>
      <div class="col-md-12" style="margin-top: 5px;margin-bottom: 5px;">
          <div class="box-tools pull-right">
            <div class="btn-group">
              <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
                  <span translate="new"></span><span class="caret"></span>
                </button>
                <ul class="dropdown-menu">
                  <li role="presentation"><a role="menuitem" tabindex="-1" ui-sref="app.menus.new" translate="new_menu"></a></li>
                </ul>
            </div>
          </div>
      </div>
    </div>
  </section>
 <section class="content">
   <div class="row">
        <div class="col-md-12">
         	<div ng-repeat="content in vm.menuGroups" ng-include="'group_renderer.html'"></div>
        </div>
    </div>
    
</section>

<script type="text/ng-template" id="menus_renderer.html">
	<table class="table table-hover">
		  <tbody>
		  <tr>
		    <th translate="title"></th>
		    <th translate="description"></th>
		    <th translate="comments"></th>
		    <th translate="resolution"></th>
		    <th translate="options"></th>
		  </tr>
		  <tr ng-repeat="menu in content.menus | filter: searchText" ng-class="{'odd': $index%2 == 0, 'even': $index%2 != 0}">
		    <td>
		     	{{menu.title}}
		    </td>
		    <td>
		     	{{menu.description}}
		    </td>
		    <td>
		     	{{menu.comments}}
		    </td>
		     <td>
		     	<span ng-repeat="resolution in constants.menus.resolutions | filter: menu.resolution">
		     		{{resolution.text}}
		     	</span>
		    </td>
		    <td class="right">
		        <div class="btn-group visible-md visible-lg hidden-sm hidden-xs">
		          <button class="btn btn-default " translate="edit"  ui-sref="app.menus.edit({menuId: menu.id})"></button>
		          <button class="btn btn-danger " translate="delete" ng-click="vm.deleteMenu(menu)"></button>
		        </div>
		        <div class="btn-group hidden-md hidden-lg">
		          <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
		            <i class="fa fa-gear"></i>
		            <span class="caret"></span>
		            <span class="sr-only">Toggle Dropdown</span>
		          </button>
		          <ul class="dropdown-menu" role="menu">
		            <li class="btn-group-vertical">
		              <button class="btn btn-default" translate="edit" ui-sref="app.menus.edit({menuId: menu.id})"></button>
		              <button class="btn btn-danger"  translate="delete" ng-click="vm.deleteMenu(menu)"></button>
		            </li>
		          </ul>
		        </div>
		   </td>
		  </tr>
		</tbody>
	</table>
</script>

<!-- Nested node template -->
<script type="text/ng-template" id="group_renderer.html">
	<div class="box box-warning" >
        <div class="box-header with-border">
        	<i class="fa fa-folder-open-o"></i>
          	<h3 class="box-title">
          		<div class="btn-group" ng-if="!content.editing">
          			<div>
              			<a href="javascript:void(0)" data-toggle="dropdown" class="dropdown-toggle" >
              				{{content.name}}
              			</a>
                     <ul class="dropdown-menu">
                      <li role="presentation">
                        <a href="javascript:void(0)" translate="edit" ng-click="content.tmpName = content.name; content.editing = true" ></a>
                      </li>
                      <li  class="delete-option" role="presentation">
                        <a href="javascript:void(0)" translate="delete" ng-click="vm.deleteGroup(content.id)" ></a>
                      </li>
                    </ul>
                </div>
          		</div>
          		<div ng-if="content.editing" class="col-xs-6">
					<input type="text" class="form-control" ng-model="content.tmpName">
                    <span class="input-group-btn">
                      <button type="button" class="btn btn-default btn-flat" translate="done" ng-click="vm.changeGroupName(content)"></button>
                      <button type="button" class="btn btn-info btn-flat" translate="cancel" ng-click="content.editing = false"></button>
                    </span>
	            </div>
          	</h3>
            <div class="box-tools pull-right">
            	<button type="button" class="btn btn-box-tool" data-widget="collapse"><i class="fa fa-minus"></i>
            	</button>
            </div>
          <!-- /.box-tools -->
        </div>
        <!-- /.box-header -->
        <div class="box-body folders" style="display: block;">

         	<div ng-repeat="content in content.groups" ng-include="'group_renderer.html'">
         	</div>
         	<div ng-if="content.menus" ng-include="'menus_renderer.html'"></div>
        </div>
      </div>
</script>
</ui-view>