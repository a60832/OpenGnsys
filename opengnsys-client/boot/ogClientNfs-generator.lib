
function BuildOSBase() {
#/**  @function BuildOSBase: @brief instala los componentes base de los opengnsys OS y muestra aquellos que hay que compilar.
#@param $1 str_versionLinux
#@param ejemplo BuildEACOSBase ubuntu904
#@return
#@warning  Salidas de errores no determinada
#@attention
#@version 0.1       Date: 02/05/2009                 Author Antonio J. Doblas Viso. Universidad de Malaga
#@note	  version importada desde EAC para su adaptación a opengnsys. No testeada
#*/
#
if [ $# = 0 ]
then
	echo"InstallEACOSBase instala los componentes base de los EAC OS."
	echo "sintaxis: InstallEACOSBASE strVersionLinux   --- Ejemplo: InstallEACOSBase ubuntu0904 "
	return
fi
if [ $# = 1 ]
then
	case $1 in
		"ubuntu0904")
		cp -ra /etc/udev/rules.d /etc/udev/rules.d-old
		rm /etc/udev/rules.d/70-persistent-net.rules
		echo "###########START Especificos EAC############ " >> /etc/apt/sources.list
		echo "deb http://free.nchc.org.tw/ubuntu jaunty-security main restricted universe multiverse" >> /etc/apt/sources.list
		echo "deb http://free.nchc.org.tw/drbl-core drbl stable" >> /etc/apt/sources.list
		echo "deb http://www.geekconnection.org/remastersys/repository ubuntu/" >> /etc/apt/sources.list
		echo "###########END Especificos EAC############ " >> /etc/apt/sources.list
		apt-get update
		#apt-get install xorg-dev xorg lxde qingy roxterm
		#apt-get install firefox links midbrowser scite	
		#apt-get install build-essential cmake m4 autoconf gettext libbz2-dev
		apt-get install nfs-common nfs-kernel-server openssh-server sshfs
		apt-get install reiser4progs hfsplus curl
		apt-get install fusesmb smbnetfs smbfs subversion
		apt-get install gkrellm saidar htop iptraf vnstat ethstatus darkstat ncdu xdiskusage iotop lshw lshw-gtk conky		
		apt-get install dcfldd ddrescue di disktype dmraid hdparm sdparm hexedit lftp lsscsi lshw mc myrescue testdisk hwinfo
		apt-get install partimage ntfsprogs partclone mysql-client php5 php5-cli php5-cgi php5-mysql registry-tools sysv-rc-conf kexec-tools gparted parted parted-doc gnu-fdisk fatresize gparted
		apt-get install lzop ethtool etherwake remastersys bfr fbgrab fbset ksh registry-tools netpipes 	
		apt-get install drbl-partimage drbl-chntpw drbl-ntfsprogs drbl-lzop
		# desactivamos por si acaso alguno servicios, que en la distribucion base no son necesarios
		#/etc/init.d/apache2 stop && update-rc.d -f apache2 remove
		#update-rc.d -f gdm remove
		#apt-get install lighttpd
		#/etc/init.d/lighttpd stop && update-rc.d -f lighttpd remove
		;;
	esac
fi

if [ $# = 1 ]
then

	echo "creando la estrucutra de datos"
	mkdir -p /opt/opengnsys/{bin,etc,log,lib/{engine/bin,modules},images,init}
	cd /root/ &&	svn co svn://www.informatica.us.es:3690/eac-hidra
fi


if [ $# = 1 ]
then
	read -p "pausa para configurar el framebuffer: abre una nueva consola y segue estas intrucciones, luego pulsa enter"
	echo "Activar el framebuffer: abre una consola y realiza estas operaciones"
	echo "/etc/modprobe.d/blacklist-framebuffer  => le comentamos las lineas de vesafb, vga16fb y radeonfb"
	echo "/etc/initramfs-tools/modules => agregamos en una linea cada una de estas fbcon vesafb vga16b"
	echo "actualizamos con # update-initramfs -u"
	echo "acivadmos el framebuffer en /boot/grub/menu.lst y en el kernel que deseemos aï¿½adimos vga=791"
fi

if [ $# = 1 ]
then
	read -p "pausa para configurar el framebuffer: abre una nueva consola y segue estas intrucciones, luego pulsa enter"
	echo "configurar el lighttd"
	read -p "press enter"
fi

if [ $# = 1 ]
then
	importclient=/opt/opengnsys
	echo "configurar el /etc/bash.bashrc"
	echo "####### EAC ##########" >> /etc/bash.bashrc
	echo "importclient=/opt/opengnsys" >> /etc/bash.bashrc
	echo "export PATH=$PATH:/sbin/:/bin/:/opt/:/usr/local/sbin/:/usr/local/bin/:/usr/bin/:/usr/sbin/:/opt/opengnsys/" >> /etc/bash.bashrc
	echo source ${importclient}/lib/engine/Settings.lib >>  /etc/bash.bashrc
	echo source ${importclient}/lib/engine/ATA.lib >>  /etc/bash.bashrc
	echo source ${importclient}/lib/engine/Boot.lib >>  /etc/bash.bashrc
	echo source ${importclient}/lib/engine/Deploy.lib >>  /etc/bash.bashrc
	echo source ${importclient}/lib/engine/FileSystem.lib >>  /etc/bash.bashrc
	echo source ${importclient}/lib/engine/PostConf.lib >>  /etc/bash.bashrc
fi

if [ $# = 1 ]
then
	read -p "pausa para compilar los programas necesarios: abre una nueva consola y segue estas intrucciones, luego pulsa enter"
	echo "estos hay que compilarlos estan dentro de source"
	echo "partition saving  http://partition-saving.com"
	echo "mbuffer (http://www.maier-komor.de/mbuffer.html) requiere ksh"
	echo "udp-cast 2008-09-14    http://udpcast.linux.lu/"
	echo "ctorrent 3.3.2   http://www.rahul.net/dholmes/ctorrent/"
	echo "wmi-client:   https://launchpad.net/ubuntu/jaunty/+source/wmi/1:0.1.12-1"
	echo "ms-sys    http://ms-sys.sourceforge.net/"
	echo "EACInterfaces   copiar el binario a /usr/sbin"
	echo NameCompany copiar a /usr/sbin"
	echo NameNtpServer a /usr/sbin"
fi
}


function BuildOgClientNfs () {
#/**  @function BuildOgClientNfs: @brief Genera una copia del sistema actual para convertirlo posteriormente en arranque pxe EAC.
#@param  $1 str_DirectorioDestino
#@param  $2 str_metodo  (debootstrap o myfilsystem)
#@param  ejemplo:  BuildOgClientNfs /opt/opengnsys/tftpboot/ogClinent/ogClientNfs debootstrap
#@return: no definida
#@warning  No controla que el el directorio destino debe estar montado en una particion distinta al sistema raiz.
#@attention
#@version 0.1       Date: 03/06/2009                 Author Antonio J. Doblas Viso. Universidad de Malaga
#@note	 falta la creacion del kernel y el initrd 
#*/
if [ $# = 0 ]
then
	echo"BuildOgClientNfs"
	echo "sintaxis: BuildOfClientNfs str_path_contenedor str_metodo"
	return
fi
if [ $# = 2 ]
then
	if [ $2 = "myfilesystem" ]
	then
		cd /
		cp -rav  /. $1/.
		cp -rav -/dev/. $1/dev/.
	fi
	if [ $2 = "debootstrap" ]
	then
	echo "debo"
	fi
fi
}